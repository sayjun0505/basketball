import{s as z,H as f,cV as A,aj as _,ak as D,cW as B,cX as E,j as e,F as u,d as a,n as L,o as k,Q as $,u as y,a as F,_ as h,r as P,z as j,p as m,J as p,T as i,bb as Q,C as g,a7 as v,cY as q,bH as H,aY as U,a3 as X,b8 as G,bQ as J,a0 as O}from"./index-cy1M6gwN.js";import{d as W}from"./NavigateNext-UdzKKBpP.js";const Y=z(f)(({...n})=>({backgroundColor:{PDF:A[600],DOC:_[600],XLS:D[600],TXT:B[600],JPG:E[600]}[n.color]}));function b(n){const{type:t}=n;return t==="folder"?e(u,{size:56,color:"disabled",children:"heroicons-outline:folder"}):a("div",{className:"relative",children:[e(u,{size:56,color:"disabled",children:"heroicons-outline:document"}),e(Y,{color:t,className:"absolute left-0 bottom-0 px-6 rounded text-12 font-semibold leading-20 text-white",children:t})]})}const I={selectedItemId:null},x=L({name:"fileManagerApp",initialState:I,reducers:{setSelectedItemId:(n,t)=>{n.selectedItemId=t.payload},resetSelectedItemId:n=>{n.selectedItemId=I.selectedItemId}},selectors:{selectSelectedItemId:n=>n.selectedItemId}});k.inject(x);const R=x.injectInto(k),{setSelectedItemId:S,resetSelectedItemId:w}=x.actions,{selectSelectedItemId:M}=R.selectors;x.reducer;function V(n){const{items:t}=n,r=$(),{pathname:l}=r,c=y(),o=F(M),s=h.find(t,{id:o});return P.useEffect(()=>{c(w())},[l]),s?a(p.div,{initial:{y:50,opacity:.8},animate:{y:0,opacity:1,transition:{delay:.3}},className:"file-details p-24 sm:p-32",children:[e("div",{className:"flex items-center justify-end w-full",children:e(j,{size:"large",onClick:()=>c(w()),children:e(u,{children:"heroicons-outline:x"})})}),e(f,{className:" w-full rounded-8 border preview h-128 sm:h-256 file-icon flex items-center justify-center my-32",sx:{backgroundColor:d=>d.palette.mode==="light"?m(d.palette.background.default,.4):m(d.palette.background.default,.02)},children:e(p.div,{initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:e(b,{type:s.type})})}),e(i,{className:"text-18 font-medium",children:s.name}),e("div",{className:"text-16 font-medium mt-32",children:"Information"}),a("div",{className:"flex flex-col mt-16 border-t border-b divide-y font-medium",children:[a("div",{className:"flex items-center justify-between py-12",children:[e(i,{color:"text.secondary",children:"Created By"}),e(i,{children:s.createdBy})]}),a("div",{className:"flex items-center justify-between py-12",children:[e(i,{color:"text.secondary",children:"Created At"}),e(i,{children:s.createdAt})]}),a("div",{className:"flex items-center justify-between py-12",children:[e(i,{color:"text.secondary",children:"Modified At"}),e(i,{children:s.modifiedAt})]}),a("div",{className:"flex items-center justify-between py-12",children:[e(i,{color:"text.secondary",children:"Size"}),e(i,{children:s.size})]}),s.contents&&a("div",{className:"flex items-center justify-between py-12",children:[e(i,{color:"text.secondary",children:"Contents"}),e(i,{children:s.contents})]})]}),s.description&&a(Q,{children:[e("div",{className:"text-16 font-medium mt-32 pb-16 border-b",children:"Description"}),e(i,{className:"py-12",children:s.description})]}),a("div",{className:"grid grid-cols-2 gap-16 w-full mt-32",children:[e(g,{className:"flex-auto",color:"secondary",variant:"contained",children:"Download"}),e(g,{className:"flex-auto",children:"Delete"})]})]}):null}function K(n){const{path:t,folders:r,files:l}=n;return a("div",{className:"p-24 sm:p-32 w-full flex  space-y-8 sm:space-y-0 items-center justify-between",children:[a("div",{className:"flex flex-col space-y-8 sm:space-y-0",children:[a(p.span,{className:"flex items-end",initial:{x:-20},animate:{x:0,transition:{delay:.2}},children:[e(i,{component:v,to:"/apps/file-manager",className:"text-20 md:text-32 font-extrabold tracking-tight leading-none",role:"button",children:"File Manager"}),t&&(t==null?void 0:t.length)>0&&a(q,{"aria-label":"breadcrumb",className:"mx-12",separator:e(W,{fontSize:"small"}),children:[e("div",{}),t.map((c,o)=>o+1===t.length?e(i,{children:c.name},o):e(v,{color:"text.primary",to:`/apps/file-manager/${c.id}`,children:c.name},o))]})]}),e(p.span,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:e(i,{className:"text-14 font-medium mx-2",color:"text.secondary",children:`${r.length} folders, ${l.length} files`})})]}),e("div",{className:"flex items-center -mx-8",children:a(g,{className:"mx-8 whitespace-nowrap",variant:"contained",color:"secondary",children:[e(u,{size:20,children:"heroicons-outline:plus"}),e("span",{className:"hidden sm:flex mx-8",children:"Upload file"})]})})]})}function Z(n){const{item:t}=n,r=y();return t?a(f,{sx:{backgroundColor:"background.paper"},className:"relative w-full sm:w-160 h-160 m-8 p-16 shadow rounded-16",children:[e(j,{className:"absolute z-20 top-0 right-0 m-6 w-32 h-32 min-h-32",onClick:()=>r(S(t.id)),children:e(u,{size:20,children:"heroicons-solid:information-circle"})}),a(H,{className:"flex flex-col h-full w-full",to:`/apps/file-manager/${t.id}`,role:"button",children:[e("div",{className:"flex flex-auto w-full items-center justify-center",children:e(b,{type:t.type})}),a("div",{className:"flex shrink flex-col justify-center text-center",children:[e(i,{className:"truncate text-12 font-medium",children:t.name}),t.contents&&e(i,{className:"truncate text-12 font-medium",color:"text.secondary",children:t.contents})]})]})]}):null}function ee(n){const{item:t}=n,r=y();return t?a(f,{sx:{backgroundColor:"background.paper"},className:"flex flex-col relative w-full sm:w-160 h-160 m-8 p-16 shadow rounded-16 cursor-pointer",onClick:()=>r(S(t.id)),children:[e("div",{className:"flex flex-auto w-full items-center justify-center",children:e(b,{type:t.type})}),a("div",{className:"flex shrink flex-col justify-center text-center",children:[e(i,{className:"truncate text-12 font-medium",children:t.name}),t.contents&&e(i,{className:"truncate text-12 font-medium",color:"text.secondary",children:t.contents})]})]}):null}function te(n){const{files:t,folders:r}=n;return t.length===0&&r.length===0?e(p.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:e(i,{color:"text.secondary",variant:"h5",children:"There are no items!"})}):a("div",{className:"p-32",children:[(r==null?void 0:r.length)>0&&a(f,{className:"p-16 w-full rounded-16 mb-24 border",sx:{backgroundColor:l=>l.palette.mode==="light"?m(l.palette.background.default,.4):m(l.palette.background.default,.02)},children:[e(i,{className:"font-medium",children:"Folders"}),e("div",{className:"flex flex-wrap -m-8 mt-8",children:r.map(l=>e(Z,{item:l},l.id))})]}),t.length>0&&a(f,{className:"p-16 w-full rounded-16 mb-24 border",sx:{backgroundColor:l=>l.palette.mode==="light"?m(l.palette.background.default,.4):m(l.palette.background.default,.02)},children:[e(i,{className:"font-medium",children:"Files"}),e("div",{className:"flex flex-wrap -m-8 mt-8",children:t.map(l=>e(ee,{item:l},l.id))})]})]})}const le=["file_manager_folder"],ne=U.enhanceEndpoints({addTagTypes:le}).injectEndpoints({endpoints:n=>({getFileManagerFolder:n.query({query:t=>({url:`/mock-api/file-manager/${t}`}),providesTags:["file_manager_folder"]}),updateFileManagerFolder:n.mutation({query:t=>({url:`/mock-api/file-manager/${t.folderId}`,method:"PUT",body:t.fileManagerItem}),invalidatesTags:["file_manager_folder"]}),deleteFileManagerFolder:n.mutation({query:t=>({url:`/mock-api/file-manager/${t}`,method:"DELETE"}),invalidatesTags:["file_manager_folder"]})}),overrideExisting:!1}),{useGetFileManagerFolderQuery:ae,useUpdateFileManagerFolderMutation:se,useDeleteFileManagerFolderMutation:ce}=ne;function oe(){const n=X(T=>T.breakpoints.down("lg")),t=G(),{folderId:r}=t,{data:l,isLoading:c}=ae(r),o=F(M),s=h.find(l==null?void 0:l.items,{id:o}),d=h.filter(l==null?void 0:l.items,{type:"folder"}),N=h.reject(l==null?void 0:l.items,{type:"folder"}),C=l==null?void 0:l.path;return c?e(O,{}):e(J,{header:e(K,{path:C,folders:d,files:N}),content:e(te,{folders:d,files:N}),rightSidebarOpen:!!s,rightSidebarContent:e("div",{className:"w-full",children:e(V,{items:l==null?void 0:l.items})}),rightSidebarWidth:400,scroll:n?"normal":"content"})}export{oe as default};
